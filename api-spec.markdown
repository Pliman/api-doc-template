# API规范

1. [统一约定](#统一约定)
1. [请求参数](#请求参数)
1. [返回结果](#返回结果)

## 统一约定

- 所有API均使用HTTP协议，返回结果默认为JSON格式。
- 提交参数和返回结果均使用UTF-8编码。
- 查询请求使用GET，修改请求使用POST，修改操作包括创建、修改和删除。
- 时间统一采用“2014-04-25 15:06:53.012”这样的格式，精确到毫秒。
- 如无特别说明，请求参数和返回结果里的时间均为UTC时间，客户端需根据用户当前时区进行转换。
- 表单字段传空具有特殊意义，对于无模式的文档类型对象，创建时忽略该空字段，修改时删除该空字段。

## 请求参数

- 所有检查参数长度的地方，中英文字符长度均算1。

| 请求头 | 说明 |
|---------|-------|
| Accept | 期望的响应格式，可选值包括“application/json”、“text/xml”和“text/html”，默认为“application/json” |
| Accept-Language | 期望的响应语言，比如“zh-CN”、“zh-TW”等 |
| Content-Type | 提交内容格式，可选值包括“application/x-www-form-urlencoded”和“multipart/form-data”，默认为“application/json” |
| User-Agent | 用户代理信息，可包含系统和客户端版本等信息 |

## 返回结果

| 响应头 | 说明 |
|---------|-------|
| Content-Type | 响应内容格式，可取值参考请求头说明 |

当服务端响应的HTTP状态码为200时，将返回如下的JSON格式数据。code为0表示成功，其余为失败，一般来说可以将message提示给用户，个别情况需要根据结果码进行对应处理。当响应状态码非200时，不能保证返回正确的JSON格式数据，客户端需要处理各种常见的HTTP响应状态码。

返回结果仅展示嵌套结构，具体对象字段说明请参考 [对象字段说明](object-field-desc) 。如果字段值为null，则不返回。
    {
        "code": 0, // 结果码，0为成功，其余为失败，0-999为通用错误，业务错误为1000以上
        "message": "", // 结果描述
        "data1": ..., // 业务数据项1
        "data2": ..., // 业务数据项2
        ...
    }

| HTTP状态码 | 描述 |
|---------|-------|
| 200        | 请求成功     |
| 404        | 资源未找到     |
| 429        | 请求太频繁     |
| 500        | 服务器内部错误     |

| 公共结果码 | 描述 |
|---------|-------|
| 0          | 成功     |
| 1          | 系统错误 |
| 2          | 参数错误 |
| 3          | 链接过期 |
| 4          | 未登录   |
| 5          | 非法请求 |
| 6          | 没有权限 |
| 7          | 资源未找到 |
| 8          | 资源重复 |
| 9          | 内容包含敏感词 |
| 10        | 验证码错误 |
| 11        | 下载文件失败 |

| 业务结果码 | 描述 |
|---------|-------|